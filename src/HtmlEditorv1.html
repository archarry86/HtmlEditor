<!DOCTYPE html>
<html class="controls">
<body class="controls">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

<script>
var index = 0;

$(document).ready(function(){


$('#html *').click(function(){

if(this != window.myelement)
return;

var target = $(this);
if(target.is( "div" )||target.is( "table" )){

window.puthtml();
} 


});



//$('#html *').mouseenter(function(){
////console.log('mouseneter '+index+" "+$(this).html());
//window.divover($(this)[0]);
//
//}).mouseleave(function(){
////console.log('mouseleave '+index+" "+$(this).html());
//window.divout($(this)[0]);
//
//
//});

window._html = $("#html")[0];

$( "#html *" ).hover(
  function() {
  
  if(window.myelement != null  && _html != window.myelement )
   window.myelement.style.border   = "thin  solid #FFFFFF";
   
   window.myelement = this;
   window.myelement.style.border   = "thin  solid #FF0000";
     if(_html != $(  window.myelement).parent()[0])
   $(  window.myelement).parent()[0].style.border   = "thin  solid #FFFFFF";
 
  }, function() {
  
    this.style.border   = "thin  solid #FFFFFF";
	
	window.myelement =$(this).parent()[0];//
	
	if( _html != window.myelement )
	window.myelement.style.border   = "thin  solid #FF0000";
  }
);


$( "button" ).click(function(){

if(window.buttonselected != null)
window.buttonselected.style.backgroundColor ="";

this.style.backgroundColor ="green";
window.buttonselected = this;

});

});

function puthtml(){

if(window.myelement == null)
return; 

if(window.buttonselected == null)
return; 

var id = window.buttonselected.id;
var jqobj = $(window.myelement);
//debugger;

if(id =="table")
{

jqobj.append(window._Table().getHtmlBody());

window.tout=  window.setTimeout(function(){
//debugger;
Rebind(jqobj);
},300 );
return;
}


if(id =="div"  )
{
jqobj.append(window._Div().getHtmlBody());

window.tout=  window.setTimeout(function(){
//debugger;
Rebind(jqobj);
}  ,300);

return;
}

if(id =="input")
{
jqobj.append(window._inputtext().getHtmlBody());

window.tout=  window.setTimeout(function(){
//debugger;
Rebind(jqobj);
},300 );

return;
}

}

function Rebind(obj){
 clearTimeout(window.tout);
 //debugger;

$(obj.children().last()).click(function(){

if(this != window.myelement)
return;

var target = $(this);
if(target.is( "div" )||target.is( "table" )){

window.puthtml();
} 


});


$( obj.children().last()).hover(
  function() {
  
  if(window.myelement != null  && _html != window.myelement )
   window.myelement.style.border   = "thin  solid #FFFFFF";
   
   window.myelement = this;
   window.myelement.style.border   = "thin  solid #FF0000";
     if(_html != $(  window.myelement).parent()[0])
   $(  window.myelement).parent()[0].style.border   = "thin  solid #FFFFFF";
 
  }, function() {
  
    this.style.border   = "thin  solid #FFFFFF";
	
	window.myelement =$(this).parent()[0];//
	
	if( _html != window.myelement )
	window.myelement.style.border   = "thin  solid #FF0000";
  }
);



}



var _Div =function()
{
var f = {};

f.getHtmlBody= function(){

return "<div>NUEVO CONTENEDOR <BR></div>"
}

return f;
}
;

var _Table =function()
{

var f = {};

f.getHtmlBody= function(){

return "<table><tr><th>c1R1</th><th>c2R1</th><th>c3R1</th></tr><tr><td>c1R1</td><td>c2R1</td><td>c3R1</td></tr></table>"
}

return f;
}
;

var _inputtext =function()
{
var f = {};

f.getHtmlBody= function(){

return "<input type='text' id='name'  required       minlength='0' maxlength='8' size='10'>";
}

return f;
};



window.buttonselected = null;

window.myelement = null;



function btnclick(btn){
if(window.buttonselected != null)
window.buttonselected.style.backgroundColor ="";

btn.style.backgroundColor ="green";
window.buttonselected = btn;

}

</script>
<style>
.center {
  margin: auto;
  width: 60%;
  border: 3px solid #73AD21;
  padding: 10px;
}

.html {
  border: 3px solid #7321AD;
  padding: 10px;
}



button{
 width: 300px;
}

</style>
<div id="controls" class="controls" style="float:left;width:40%">


<div class="center">
<button id="table"  >Table</button><br />
<button id="div"    >Div</button><br />
<button id="input"  >input text</button><br />
</div>

</div>
<div id="html" class="controls html" style="float:left;width:40%">
<div id="main">



<div   ><!-- onmouseenter="divover(this)" onmouseleave="divout(this)"-->
div1

<div >
div1 sub div
</div>

</div>

<div  >
div2<br><br><br><br><br>

<div  >
div2 sub div
</div>

</div>

</div>

<div id="test2">
lllll2
<div id="test">
lllll
</div>

</div>

<div id="test3">
lllll2
<div id="test4">
lllll
</div>

</div>

</div>

<div class="controls" style="clear:both">

</div>



</body>
</html>
