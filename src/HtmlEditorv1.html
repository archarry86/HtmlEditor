<!DOCTYPE html>
<html class="controls">
<body class="controls">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

<script>

$(document).ready(function(){

var index = 0;

$('#html *').click(function(){
var target = $(this);
if(target.is( "div" )||target.is( "table" )){

window.puthtml();
} 


});


$('#html *').mouseenter(function(){
//console.log('mouseneter '+index+" "+$(this).html());
window.divover($(this)[0]);
index++;
}).mouseleave(function(){
//console.log('mouseleave '+index+" "+$(this).html());
window.divout($(this)[0]);
index++;
});

//$('#html *')



//$('#html *').mouseover(function() {
//
//   window.divover($(this)[0]);
//  })
//  .mouseout(function() {
//   window.divout($(this)[0]);
//  });
 


}
);

function puthtml(){


if(window.myelement == null)
return; 

if(window.buttonselected == null)
return; 

var id = window.buttonselected.id;
var jqobj = $(window.myelement);
//debugger;

if(id =="table")
{

jqobj.append(window._Table().getHtmlBody());
jqobj.last().mouseenter(function(){
//console.log('mouseneter '+index+" "+$(this).html());
window.divover($(this)[0]);

}).mouseleave(function(){
//console.log('mouseleave '+index+" "+$(this).html());
window.divout($(this)[0]);

});

return;
}


if(id =="div"  )
{
jqobj.append(window._Div().getHtmlBody());


jqobj.last().mouseenter(function(){
//console.log('mouseneter '+index+" "+$(this).html());
window.divover($(this)[0]);
index++;
}).mouseleave(function(){
//console.log('mouseleave '+index+" "+$(this).html());
window.divout($(this)[0]);
index++;
});

return;
}

if(id =="input")
{
jqobj.append(window._inputtext().getHtmlBody());

jqobj.last().mouseenter(function(){
//console.log('mouseneter '+index+" "+$(this).html());
window.divover($(this)[0]);

}).mouseleave(function(){
//console.log('mouseleave '+index+" "+$(this).html());
window.divout($(this)[0]);

});

return;
}

}



var _Div =function()
{
var f = {};

f.getHtmlBody= function(){

return "<div>NUEVO CONTENEDOR <BR></div>"
}

return f;
}
;

var _Table =function()
{

var f = {};

f.getHtmlBody= function(){

return "<table><tr><th>c1R1</th><th>c2R1</th><th>c3R1</th></tr><tr><td>c1R1</td><td>c2R1</td><td>c3R1</td></tr></table>"
}

return f;
}
;

var _inputtext =function()
{
var f = {};

f.getHtmlBody= function(){

return "<input type='text' id='name'  required       minlength='0' maxlength='8' size='10'>";
}

return f;
};



window.buttonselected = null;


window.myelement = null;

function bigImg(x) {
  x.style.height = "64px";
  x.style.width = "64px";
}

function normalImg(x) {
  x.style.height = "32px";
  x.style.width = "32px";
}
function divover(x) {

if($(x).attr("class") == "controls"){
return;
}
 
 try{
  divout($(x).parent()[0]);
 }
 catch(e){
 }


 x.style.border = "thick solid #FF0000";
  window.myelement = x;
}

function divout(x) {
  x.style.border = "thick solid #FFFFFF";
  
  divover($(x).parent()[0]);
}

function btnclick(btn){
if(window.buttonselected != null)
window.buttonselected.style.backgroundColor ="";

btn.style.backgroundColor ="green";
window.buttonselected = btn;

}

</script>
<div id="controls" class="controls" style="float:left;width:40%">
<div>
<button id="table" onclick="btnclick(this)" >Table</button><br />
<button id="div"   onclick="btnclick(this)" >Div</button><br />
<button id="input" onclick="btnclick(this)" >input text</button><br />
</div>

</div>
<div id="html" class="controls" style="float:left;width:40%">

<div   ><!-- onmouseenter="divover(this)" onmouseleave="divout(this)"-->
div1

<div >
div1 sub div
</div>

</div>

<div  >
div2<br><br><br><br><br>

<div  >
div2 sub div
</div>

</div>

</div>

<div class="controls" style="clear:both">

</div>

</body>
</html>
